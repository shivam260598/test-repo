{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Fuse from 'fuse.js';\n\nconst useApp = () => {\n  _s();\n\n  const [response, setResponse] = useState([]);\n  const [inputSearch, setInputSearch] = useState('');\n  const [searchResult, setSearchResult] = useState([]);\n\n  const getApi = () => {\n    fetch('https://prototype.sbulltech.com/api/v2/instruments').then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      const arr = data.split('\\n');\n      let array = [];\n      arr.forEach((element, index) => {\n        const companyInfo = element.split(',');\n\n        if (companyInfo[0] && index !== 0) {\n          array = [...array, {\n            symbol: companyInfo[0],\n            name: companyInfo[1],\n            sector: companyInfo[2],\n            validTill: companyInfo[3]\n          }];\n        }\n      });\n      setResponse(array);\n    });\n  };\n\n  useEffect(() => {\n    getApi();\n  }, []);\n  useEffect(() => {\n    const fuse = new Fuse(response, {\n      keys: ['symbol', 'name'],\n      shouldSort: true,\n      includeScore: true,\n      threshold: 0.2\n    });\n    const results = fuse.search(inputSearch);\n    setSearchResult(results);\n  }, [inputSearch, response]);\n  return {\n    searchResult,\n    inputSearch,\n    setInputSearch,\n    response\n  };\n};\n\n_s(useApp, \"vEBDN3obaIoUlrjR8/BNGPUAqnE=\");\n\nexport default useApp;","map":{"version":3,"names":["useEffect","useState","Fuse","useApp","response","setResponse","inputSearch","setInputSearch","searchResult","setSearchResult","getApi","fetch","then","text","data","arr","split","array","forEach","element","index","companyInfo","symbol","name","sector","validTill","fuse","keys","shouldSort","includeScore","threshold","results","search"],"sources":["/Users/shivamsingh/stocks-application/src/useApp.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport Fuse from 'fuse.js';\n\nconst useApp = () =>{\n    const [response, setResponse] = useState([]);\n  const [inputSearch, setInputSearch] = useState('');\n  const [searchResult, setSearchResult] = useState([]);\n\n  const getApi = () => {\n    fetch('https://prototype.sbulltech.com/api/v2/instruments')\n      .then(function(response) {\n        return response.text();\n      }).then(function(data) {\n        const arr = data.split('\\n');\n        let array = [];\n        arr.forEach((element, index) => {\n          const companyInfo = element.split(',');\n          if(companyInfo[0] && index !== 0){\n            array = [\n              ...array,\n              {\n                symbol: companyInfo[0],\n                name: companyInfo[1],\n                sector: companyInfo[2],\n                validTill: companyInfo[3],\n              }\n            ]; \n          } \n        });\n\n        setResponse(array);\n      });\n  };\n  \n  useEffect(() => {\n    getApi();\n  }, []);\n\n  useEffect(() => {\n    const fuse = new Fuse(response, {\n      keys: ['symbol', 'name'],\n      shouldSort: true,\n      includeScore: true,\n      threshold: 0.2,\n    });\n\n    const results = fuse.search(inputSearch);\n    setSearchResult(results);\n  }, [inputSearch, response]);\n\n  return {\n    searchResult,\n    inputSearch, \n    setInputSearch, \n    response, \n  };\n};\n\nexport default useApp;"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,IAAP,MAAiB,SAAjB;;AAEA,MAAMC,MAAM,GAAG,MAAK;EAAA;;EAChB,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BJ,QAAQ,CAAC,EAAD,CAAxC;EACF,MAAM,CAACK,WAAD,EAAcC,cAAd,IAAgCN,QAAQ,CAAC,EAAD,CAA9C;EACA,MAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCR,QAAQ,CAAC,EAAD,CAAhD;;EAEA,MAAMS,MAAM,GAAG,MAAM;IACnBC,KAAK,CAAC,oDAAD,CAAL,CACGC,IADH,CACQ,UAASR,QAAT,EAAmB;MACvB,OAAOA,QAAQ,CAACS,IAAT,EAAP;IACD,CAHH,EAGKD,IAHL,CAGU,UAASE,IAAT,EAAe;MACrB,MAAMC,GAAG,GAAGD,IAAI,CAACE,KAAL,CAAW,IAAX,CAAZ;MACA,IAAIC,KAAK,GAAG,EAAZ;MACAF,GAAG,CAACG,OAAJ,CAAY,CAACC,OAAD,EAAUC,KAAV,KAAoB;QAC9B,MAAMC,WAAW,GAAGF,OAAO,CAACH,KAAR,CAAc,GAAd,CAApB;;QACA,IAAGK,WAAW,CAAC,CAAD,CAAX,IAAkBD,KAAK,KAAK,CAA/B,EAAiC;UAC/BH,KAAK,GAAG,CACN,GAAGA,KADG,EAEN;YACEK,MAAM,EAAED,WAAW,CAAC,CAAD,CADrB;YAEEE,IAAI,EAAEF,WAAW,CAAC,CAAD,CAFnB;YAGEG,MAAM,EAAEH,WAAW,CAAC,CAAD,CAHrB;YAIEI,SAAS,EAAEJ,WAAW,CAAC,CAAD;UAJxB,CAFM,CAAR;QASD;MACF,CAbD;MAeAhB,WAAW,CAACY,KAAD,CAAX;IACD,CAtBH;EAuBD,CAxBD;;EA0BAjB,SAAS,CAAC,MAAM;IACdU,MAAM;EACP,CAFQ,EAEN,EAFM,CAAT;EAIAV,SAAS,CAAC,MAAM;IACd,MAAM0B,IAAI,GAAG,IAAIxB,IAAJ,CAASE,QAAT,EAAmB;MAC9BuB,IAAI,EAAE,CAAC,QAAD,EAAW,MAAX,CADwB;MAE9BC,UAAU,EAAE,IAFkB;MAG9BC,YAAY,EAAE,IAHgB;MAI9BC,SAAS,EAAE;IAJmB,CAAnB,CAAb;IAOA,MAAMC,OAAO,GAAGL,IAAI,CAACM,MAAL,CAAY1B,WAAZ,CAAhB;IACAG,eAAe,CAACsB,OAAD,CAAf;EACD,CAVQ,EAUN,CAACzB,WAAD,EAAcF,QAAd,CAVM,CAAT;EAYA,OAAO;IACLI,YADK;IAELF,WAFK;IAGLC,cAHK;IAILH;EAJK,CAAP;AAMD,CArDD;;GAAMD,M;;AAuDN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}